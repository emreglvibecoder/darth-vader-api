<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Vader'Ä±n Kumanda Merkezi</title>
    <link href="https://fonts.googleapis.com/css2?family=Poller+One&display=swap" rel="stylesheet">
    <style>
        body { 
            background-color: #000; 
            background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); /* YÄ±ldÄ±z arka planÄ± */
            color: #ffe81f; 
            font-family: 'Poller One', cursive; 
            display: flex; flex-wrap: wrap; justify-content: center; gap: 20px; padding: 40px;
        }
        .card { 
            background: rgba(20, 20, 20, 0.9); 
            padding: 25px; border-radius: 5px; width: 350px; 
            border: 2px solid #ffe81f;
            box-shadow: 0 0 20px #ffe81f; /* IÅŸÄ±n kÄ±lÄ±cÄ± parlamasÄ± */
            transition: 0.4s;
        }
        .card:hover { transform: scale(1.03); box-shadow: 0 0 30px #f00; border-color: #f00; } /* KÄ±rmÄ±zÄ± tarafÄ±na geÃ§iÅŸ */
        h2 { text-align: center; text-transform: uppercase; letter-spacing: 2px; color: #ffe81f; }
        input { 
            width: 88%; padding: 12px; margin: 10px 0; border-radius: 0; 
            border: 1px solid #ffe81f; background: #111; color: #fff; 
        }
        button { 
            width: 100%; padding: 12px; background: #ffe81f; color: #000; 
            border: none; font-weight: bold; cursor: pointer; text-transform: uppercase;
        }
        button:hover { background: #fff; box-shadow: 0 0 15px #fff; }
        .result { margin-top: 15px; padding: 10px; border-left: 4px solid #f00; background: #111; color: #0f0; font-family: monospace; }
        ul { list-style: none; padding: 0; }
        li { background: #222; margin: 8px 0; padding: 12px; border-left: 4px solid #ffe81f; display: flex; justify-content: space-between; }
        .vader-img { width: 100px; display: block; margin: 0 auto 20px; filter: drop-shadow(0 0 10px #f00); }
    </style>
</head>
<body>

    <div style="position: fixed; top: 10px; right: 10px; z-index: 100;">
        <audio id="vaderMusic" loop>
            <source src="https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptoken=eb9ca1d7-2f3b-4861-9c63-47021d15c7f8" type="audio/mpeg">
        </audio>
        <button onclick="document.getElementById('vaderMusic').play()" style="width: auto; padding: 5px 10px;">ğŸ”Š MÃœZÄ°ÄÄ° AÃ‡</button>
    </div>

    <img src="https://upload.wikimedia.org/wikipedia/en/7/76/Darth_Vader.png" class="vader-img" alt="Vader">

    <div class="card">
        <h2>ğŸ“œ Emirler</h2>
        <input type="text" id="gorevInput" placeholder="Bir emir giriniz...">
        <button onclick="gorevEkle()">GÃœÃ‡Ãœ KULLAN</button>
        <ul id="liste"></ul>
    </div>

    <div class="card">
        <h2>ğŸ§  KaranlÄ±k Zihin</h2>
        <input type="text" id="aiInput" placeholder="DÃ¼ÅŸÃ¼ncelerini yaz (Ä°ngilizce)...">
        <button onclick="aiAnaliz()">ZÄ°HÄ°N OKU</button>
        <div id="aiSonuc" class="result">Duygu bekleniyor...</div>
    </div>

    <div class="card">
        <h2>ğŸ’³ Galaktik Kredi</h2>
        <input type="number" id="paraInput" placeholder="Euro miktarÄ±nÄ± gir...">
        <button onclick="dovizHesapla()">KREDÄ°YE Ã‡EVÄ°R</button>
        <div id="dovizSonuc" class="result">Kur bekleniyor...</div>
    </div>

    <script>
        // Ã–NEMLÄ°: KENDÄ° RENDER LÄ°NKÄ°NÄ° BURAYA YAZ!
        const API_URL = "https://benim-ilk-apim.onrender.com"; 

        async function listele() {
            const yanit = await fetch(`${API_URL}/listele/`, { headers: { 'Authorization': 'Bearer admin' } });
            const veriler = await yanit.json();
            const liste = document.getElementById("liste");
            liste.innerHTML = "";
            veriler.forEach(g => {
                liste.innerHTML += `<li>${g.baslik} <span>${g.tamamlandi ? 'ğŸŒ‘' : 'â˜€ï¸'}</span></li>`;
            });
        }

        async function gorevEkle() {
            const baslik = document.getElementById("gorevInput").value;
            await fetch(`${API_URL}/ekle/`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ baslik: baslik, tamamlandi: false })
            });
            document.getElementById("gorevInput").value = "";
            listele();
        }

        async function aiAnaliz() {
            const metin = document.getElementById("aiInput").value;
            const yanit = await fetch(`${API_URL}/analiz/${metin}`);
            const veri = await yanit.json();
            document.getElementById("aiSonuc").innerText = `KaranlÄ±k TarafÄ±n Sezisi: ${veri.duygu}`;
        }

        async function dovizHesapla() {
            const miktar = document.getElementById("paraInput").value;
            const yanit = await fetch(`${API_URL}/doviz-hesapla/${miktar}`);
            const veri = await yanit.json();
            document.getElementById("dovizSonuc").innerText = `${miktar} EUR = ${veri.toplam_tl} Galaktik TL`;
        }

        listele();
    </script>
</body>
</html>
